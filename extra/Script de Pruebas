
SELECT * FROM Capacidad;
SELECT * FROM Puesto;
SELECT * FROM Subpuesto;
SELECT * FROM Empleado;


DELETE FROM Capacidad WHERE cap_puesto = '003' AND cap_empleado =  '00111';
SELECT * FROM Empleado WHERE emp_nombre LIKE '%%';
SELECT * FROM Empleado WHERE emp_id = '00001';
SELECT * FROM Capacidad WHERE cap_empleado = '00111';
SELECT Puesto.* FROM Puesto JOIN Capacidad ON cap_puesto = pst_id WHERE  cap_empleado = '00001';
SELECT * FROM Capacidad WHERE cap_puesto = '003';
SELECT Empleado.* FROM Empleado JOIN Capacidad ON emp_id = cap_empleado WHERE  cap_puesto = '003';
DELETE FROM Puesto WHERE pst_id LIKE '001';
SELECT * FROM Puesto WHERE pst_id NOT IN 
(SELECT pst_id FROM Puesto JOIN Capacidad ON cap_puesto = pst_id WHERE  cap_empleado = '00011');
SELECt * FROM Puesto;
SELECT spt_puesto_inferior FROM Subpuesto WHERE spt_puesto_superior = '001';

SELECT * FROM Puesto WHERE pst_id NOT IN 
(SELECT emp_puesto FROM Empleado WHERE emp_puesto IS NOT NULL);

#Empleados que pueden cubrir a un empleado
SELECT * 
FROM Empleado
WHERE emp_puesto = 
(SELECT spt_puesto_inferior 
FROM Subpuesto 
JOIN Empleado ON emp_puesto = spt_puesto_superior
WHERE emp_id = '00001');

#Empleados que pueden cubrir a un empleado 2 intento
SELECT 
    Empleado . *
FROM
    Empleado
        JOIN
    Subpuesto ON emp_puesto = spt_puesto_inferior
        JOIN
    Empleado as Superior ON Superior.emp_puesto = spt_puesto_superior
WHERE
    Superior.emp_id = '$emp_id';

UPDATE Empleado
SET
emp_id = '$emp->id',
emp_nombre = '$emp->nombre',
emp_puesto = '$emp->puesto'
WHERE emp_id = '$id_empleado';

SELECT inci_inicio, inci_fin FROM Incidencia 
JOIN Empleado ON emp_id = inci_empleado WHERE emp_id = '003';

SELECT * FROM Incidencia;

SELECT inci_inicio, inci_fin, inci_concepto FROM Incidencia
WHERE inci_empleado = '00011'
AND inci_inicio <= '2014-01-16'
AND inci_fin >= '2014-01-15';

SELECT Empleado.*,
pst_nombre, 
(SELECT COUNT(*) 
FROM Incidencia 
WHERE inci_empleado = emp_id 
AND inci_inicio <= '2014-01-16'
AND inci_fin >= '2013-01-15' ) AS emp_incidencias 
FROM Empleado 
JOIN Capacidad ON emp_id = cap_empleado 
JOIN Puesto ON emp_puesto = pst_id
WHERE cap_puesto = '00000007';

